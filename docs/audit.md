# Audit

- [Audit](#audit)

## Pre-Audit Checklist

### Checklist Requirements

Pre-Audit Checklist:

A reminder to provide us with the must haves 3 business days prior to the audit start days to avoid delays:

**Must haves:**

- A URL of the repository containing the source code
- The release branch / commit hash to be reviewed
- An explicit list of files in scope and out of scope for the security audit
- Robust and comprehensive documentation describing the intended functionality of the system

**Nice-to-haves:**

- Clear instructions for setting up the system and run the tests (usually in the README file)
- Any past audits
- Any tooling output logs
- Output generated by running the test suite
- Test coverage report

Please disregard what may be irrelevant in the above list for this particular audit.
Reminder that we cannot accept any scope changes during the course of the audit.

And more on audit preparation in this blogpost: https://medium.com/thesis-defense/why-crypto-needs-security-audits-d12f3909ac21 - thanks!

### Checklist Response

**Repository**: https://github.com/pokt-network/smt

- **Branch**: `main`
- **Hash**: `868237978c0b3c0e2added161b36eeb7a3dc93b0`

**Documentation**

- **Background**: [Relay Mining](https://arxiv.org/abs/2305.10672)
- **Technical Documentation**: https://github.com/pokt-network/smt/tree/main/docs
- _NOTE: we may integrate this into [https://dev.poktroll.com](https://dev.poktroll.com/) (which is out of scope) in the future_

**Files**

- Nothing is explicitly out of scope but the focus should be on the files below
- The following is a manually filtered list of files after running `tree -P '*.go' -I '*_test.go'`

```bash
  .
  ├── errors.go
  ├── hasher.go
  ├── kvstore
  │   ├── badger
  │   │   ├── errors.go
  │   │   ├── godoc.go
  │   │   ├── interface.go
  │   │   └── kvstore.go
  │   ├── interfaces.go
  ├── options.go
  ├── proofs.go
  ├── smst.go
  ├── smt.go
  ├── types.go
  └── utils.go
```

**Makefile**

- Running `make` in the root of the repo shows a list of options
- This gives access to tests, benchmarks, etc...

```bash
make
help                           Prints all the targets in all the Makefiles
list                           List all make targets
test_all                       runs the test suite
test_badger                    runs the badger KVStore submodule's test suite
mod_tidy                       runs go mod tidy for all (sub)modules
go_docs                        Generate documentation for the project
benchmark_all                  runs all benchmarks
benchmark_smt                  runs all benchmarks for the SMT
benchmark_smt_fill             runs a benchmark on filling the SMT with different amounts of values
benchmark_smt_ops              runs the benchmarks testing different operations on the SMT against different sized tries
benchmark_smst                 runs all benchmarks for the SMST
benchmark_smst_fill            runs a benchmark on filling the SMST with different amounts of values
benchmark_smst_ops             runs the benchmarks test different operations on the SMST against different sized tries
benchmark_proof_sizes          runs the benchmarks test the proof sizes for different sized tries
```
